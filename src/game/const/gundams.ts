/* --------------------------------------------------------------------------
 *  gundams.ts
 *  ------------------------------------------------------------------------
 *  “どうぶつタワーバトル” をガンダムの機体で遊べるようにするための
 *  **ピース（ブロック）メタデータ定義ファイル** です。
 *
 *  - **Scene（Play.ts）側** は `import { gundams } from "../const/gundams"` として
 *    この配列を参照し、ランダムに 1 機取り出してピースを生成します。
 *  - 当たり判定（shape）は PhysicsEditor で出力した `shapes.json` に
 *    格納しており、`key` が一致するエントリを **MatterJS** の形状として
 *    読み込みます（Play.ts 内の `const shapes = this.cache.json.get("shapes")`）。
 *
 *  各フィールドの意味は以下の通り。
 *    ├ key       … Phaser のテクスチャキー（Preloader でロードした PNG 名）
 *    ├ scale     … 画面に表示するときの拡大率（原寸＝1.0）
 *    ├ friction  … 地面や他ピースと接触したときの摩擦係数
 *    ├ bounce    … 反発係数（0 に近いほど跳ねない）
 *    └ mass      … 慣性質量。数値が大きいほど“重い”扱いになる
 * ------------------------------------------------------------------------ */

/* ------------------------------------------------------------------ */
/*  型定義 – 1 機分のメタデータ                                      */
/* ------------------------------------------------------------------ */
export interface GundamMeta {
    key: string; // テクスチャキー（PNG / TextureAtlas のフレーム名など）
    scale: number; // 表示スケール（1 = 原寸）
    friction: number; // 摩擦係数（0〜1）
    bounce: number; // 反発係数（0〜1）
    mass: number; // 質量（MatterJS の body.mass に反映）
}

/* ------------------------------------------------------------------ */
/*  デフォルト値 – 似たような機体が多いので一括で持っておく            */
/* ------------------------------------------------------------------ */
const DEFAULT_SCALE = 0.2; // 画像を 1/5 に縮小表示
const DEFAULT_FRICTION = 0.8; // 止まりやすいよう高摩擦
const DEFAULT_BOUNCE = 0.05; // ほぼ跳ねない
const DEFAULT_MASS = 5; // 適度な重さ

/* ------------------------------------------------------------------ */
/*  gundams 配列 – ゲームが参照するメインエクスポート                 */
/* ------------------------------------------------------------------ */
export const gundams: GundamMeta[] = [
    /* ------------------------------------------------------------------
     *  ペイルライダー（ブルー – 標準パラメータ
     * ---------------------------------------------------------------- */
    {
        key: "palerider",
        scale: DEFAULT_SCALE,
        friction: DEFAULT_FRICTION,
        bounce: DEFAULT_BOUNCE,
        mass: DEFAULT_MASS,
    },
    /* ------------------------------------------------------------------
     *  ガンタンク – 標準パラメータ
     * ---------------------------------------------------------------- */
    {
        key: "guntank",
        scale: DEFAULT_SCALE,
        friction: DEFAULT_FRICTION,
        bounce: DEFAULT_BOUNCE,
        mass: DEFAULT_MASS,
    },
    /* ------------------------------------------------------------------
     *  サザビー – サイズが大きいので scale を 1.5 倍に
     * ---------------------------------------------------------------- */
    {
        key: "sazabi",
        scale: DEFAULT_SCALE * 1.5, // ← 他より大きく表示
        friction: DEFAULT_FRICTION,
        bounce: DEFAULT_BOUNCE,
        mass: DEFAULT_MASS,
    },
    /* ------------------------------------------------------------------
     *  ザク II（射撃装備）– 標準パラメータ
     * ---------------------------------------------------------------- */
    {
        key: "zakuII-ranged",
        scale: DEFAULT_SCALE,
        friction: DEFAULT_FRICTION,
        bounce: DEFAULT_BOUNCE,
        mass: DEFAULT_MASS,
    },
    /* ------------------------------------------------------------------
     *  ガンダム（RX-78）– 標準パラメータ
     * ---------------------------------------------------------------- */
    {
        key: "gundam",
        scale: DEFAULT_SCALE,
        friction: DEFAULT_FRICTION,
        bounce: DEFAULT_BOUNCE,
        mass: DEFAULT_MASS,
    },
];
